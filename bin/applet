#! /bin/bash
# applet.sh - Runs selected Rofi applet
# @author umutsevdi 
# @requires rofi

applet_path=$HOME/.dotfiles/applets/

Help()
{
   # Display Help
   echo "applet.sh - Applet Launcher Interface"
   echo "  Runs selected applet"
   echo
   echo "Syntax: [-r]"
   echo
   echo "Options:"
   echo "-h/--help          Prints this menu."
   echo "-r/--run \$app      Runs selected applet"
   echo
}

Run()
{
    sh $applet_path/$app/launch.sh
}

if [[ "$#" -eq 0 ]]; then
    Help
    exit
fi
for arg in $@;do
    if   [[ "$arg" = "-h" ]] || [[ "$arg" = "--help" ]]; then
        Help
        exit
    elif [[ $run = true ]]; then 
        app=$arg
        if [[ "$(find $applet_path/$app 2>/dev/null)" = "" ]]; then
            echo -e "Error: No such applet at applet directory" 1>&2
            exit
        fi
    elif [[ "$arg" = "-r" ]] || [[ "$arg" = "--run" ]]; then 
        run=true
    else
        echo -e "Error: Invalid arguments" 1>&2
        exit
    fi 
done
Run

