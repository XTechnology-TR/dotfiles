#! /bin/bash
# applet.sh - Runs selected Rofi applet
# @author umutsevdi 
# @requires rofi

applet_path=$HOME/.dotfiles/applets/

options=`ls -d $applet_path/*/ | sed "s#$applet_path##g" | tr "/" " "`

Help()
{
   # Display Help
   echo "applet.sh - Applet Launcher Interface"
   echo "──────────────────────────────────────────────"
   echo "Runs selected applet"
   echo
   echo "Syntax: [-r]"
   echo "Options:"
   echo "┌────────────────────────────────────────────┐"
   echo "│ -h/--help          Prints this menu.       │"
   echo "│ -r/--run \$app      Runs selected applet    │"
   echo "└────────────────────────────────────────────┘"
   echo " Applets:"
   echo " `echo $options`"
   echo
}

Run()
{
    sh $applet_path/$app/launch.sh 2>/dev/null
}

if [[ "$#" -eq 0 ]]; then
    Help
    exit
fi
for arg in $@;do
    if   [ "$arg" = "-h" ] || [ "$arg" = "--help" ]; then
        Help
        exit
    elif [ $run = true ]; then 
        app=$arg
        case "$options" in 
          *$app*)
           Run
           exit
           ;;
        esac
        echo "error: Applet was not found." 1>&2
    elif [ "$arg" = "-r" ] || [ "$arg" = "--run" ]; then 
        run=true
    else
        echo -e "Error: Invalid arguments" 1>&2
        exit
    fi 
done

